targets:

  plant_parameters:
    command: read.csv("data/growth_model_pars.csv")

  output/main/table-pars.tex:
    command: table_plant_parameters(plant_parameters, target_name)

  output/main/growth_light_mass.pdf:
    command: figure_dY_dt(mass_above_ground_dt_data)
    plot: square

  mass_above_ground_dt_data:
    command: figure_mass_above_ground_dt_data()

  output/main/growth_light_dia.pdf:
    command: figure_dY_dt(diameter_stem_dt_data)
    plot: square

  diameter_stem_dt_data:
    command: figure_diameter_stem_dt_data()

  output/main/max_leaf_above.pdf:
    command: figure_lcp_whole_plant()
    plot: wide


  rate_vs_size_data:
    command: figure_rate_vs_size_data()

  output/main/mass_fraction.pdf:
    command: figure_mass_fraction(rate_vs_size_data)
    plot:
      width: 10
      height: 2

  output/con/net_mass_production_dt_net_mass_production_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("net_mass_production_dt"), I("output/con"))

  output/con/mass_total_dt_mass_total_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("mass_total_dt"), I("output/con"))

  output/con/darea_leaf_dmass_live_darea_leaf_dmass_live.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("darea_leaf_dmass_live"), I("output/con"))

  output/con/height_dt_height_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("height_dt"), I("output/con"))

  output/con/area_leaf_dt_area_leaf_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("area_leaf_dt"), I("output/con"))

  output/con/area_stem_dt_area_stem_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("area_stem_dt"), I("output/con"))

  output/con/diameter_stem_dt_diameter_stem_dt.pdf:
    command: figure_rate_vs_size_panels(rate_vs_size_data, I("diameter_stem_dt"), I("output/con"))

  output/SI/size_dpdt.pdf:
    command: figure_rate_vs_size(rate_vs_size_data, I("net_mass_production_dt"))
    plot: wide

  output/SI/size_dhdt.pdf:
    command: figure_rate_vs_size(rate_vs_size_data, I("height_dt"))
    plot: wide

  output/SI/size_dDdt.pdf:
    command: figure_rate_vs_size(rate_vs_size_data, I("diameter_stem_dt"))
    plot: large_square

  output/SI/size_dastdt.pdf:
    command: figure_rate_vs_size(rate_vs_size_data, I("area_stem_dt"))
    plot: large_square

  output/SI/lma_growth_derivative.pdf:
    command: figure_trait_derivative(I("height_dt"))
    plot: wide

  output/SI/lma_effects_at_diameters.pdf:
    command: trait_effects_plot(d_lma_diameter_abs)
    plot: large_square
  output/SI/lma_effects_at_heights.pdf:
    command: trait_effects_plot(d_lma_height_abs)
    plot: large_square
  output/SI/lma_effects_at_diameters_relative.pdf:
    command: trait_effects_plot(d_lma_diameter_rel)
    plot: large_square
  output/SI/lma_effects_at_heights_relative.pdf:
    command: trait_effects_plot(d_lma_height_rel)
    plot: large_square

  output/SI/rho_effects_at_diameters.pdf:
    command: trait_effects_plot(d_rho_diameter_abs)
    plot: large_square
  output/SI/rho_effects_at_heights.pdf:
    command: trait_effects_plot(d_rho_height_abs)
    plot: large_square
  output/SI/rho_effects_at_diameters_relative.pdf:
    command: trait_effects_plot(d_rho_diameter_rel)
    plot: large_square
  output/SI/rho_effects_at_heights_relative.pdf:
    command: trait_effects_plot(d_rho_height_rel)
    plot: large_square

  output/SI/hmat_effects_at_diameters.pdf:
    command: trait_effects_plot(d_hmat_diameter_abs)
    plot: large_square
  output/SI/hmat_effects_at_heights.pdf:
    command: trait_effects_plot(d_hmat_height_abs)
    plot: large_square
  output/SI/hmat_effects_at_diameters_relative.pdf:
    command: trait_effects_plot(d_hmat_diameter_rel)
    plot: large_square
  output/SI/hmat_effects_at_heights_relative.pdf:
    command: trait_effects_plot(d_hmat_height_rel)
    plot: large_square

  ## Data for the figures:
  d_lma_diameter_abs:
    command: trait_effects_data(I("lma"), I("diameter_stem"))
  d_lma_height_abs:
    command: trait_effects_data(I("lma"), I("height"))
  d_lma_diameter_rel:
    command: trait_effects_data(I("lma"), I("diameter_stem"), TRUE)
  d_lma_height_rel:
    command: trait_effects_data(I("lma"), I("height"), TRUE)
  d_rho_diameter_abs:
    command: trait_effects_data(I("rho"), I("diameter_stem"))
  d_rho_height_abs:
    command: trait_effects_data(I("rho"), I("height"))
  d_rho_diameter_rel:
    command: trait_effects_data(I("rho"), I("diameter_stem"), TRUE)
  d_rho_height_rel:
    command: trait_effects_data(I("rho"), I("height"), TRUE)
  d_hmat_diameter_abs:
    command: trait_effects_data(I("hmat"), I("diameter_stem"))
  d_hmat_height_abs:
    command: trait_effects_data(I("hmat"), I("height"))
  d_hmat_diameter_rel:
    command: trait_effects_data(I("hmat"), I("diameter_stem"), TRUE)
  d_hmat_height_rel:
    command: trait_effects_data(I("hmat"), I("height"), TRUE)
