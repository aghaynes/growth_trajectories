library("plant")
library("baad.data")
library("rmarkdown")
library("xtable")
library("RColorBrewer")
library("dplyr")
library("knitr")
library("parallel")
library("rstan")
library("grImport")
library("gridBase")

source("R/axis.R")
source("R/build.R")
source("R/figures_data.R")
source("R/figures.R")
source("R/stan.R")
source("R/tables.R")
source("R/talk.R")
source("R/utils-plot.R")
source("R/utils.R")
source("R/wright_2004.R")

dir.create("downloads", FALSE, TRUE)
dir.create("output/main", FALSE, TRUE)
dir.create("output/SI", FALSE, TRUE)
dir.create("output/conn", FALSE, TRUE)
dir.create("output/talk", FALSE, TRUE)

height_dt_data <- figure_height_dt_data()
diameter_stem_dt_data <- figure_diameter_stem_dt_data()
area_stem_dt_data <- figure_area_stem_dt_data()
mass_above_ground_dt_data <- figure_mass_above_ground_dt_data()
lcp_trait_data <- figure_lcp_trait_data()
rate_vs_size_data <- figure_rate_vs_size_data()
height_dt_data_talk <- figure_height_dt_data(sizes = c(0.25, 0.5, 1, 2, 5, 10, 15, 20))

pdf("output/main/lcp_schematic.pdf", width = 6L, height = 4L)
figure_lcp_schematic()
dev.off()
pdf("output/main/growth_light_height.pdf", width = 7.5, height = 5L)
figure_dY_dt(height_dt_data)
dev.off()
pdf("output/SI/growth_light_dia.pdf", width = 7.5, height = 5L)
figure_dY_dt(diameter_stem_dt_data)
dev.off()
pdf("output/SI/growth_light_area.pdf", width = 7.5, height = 5L)
figure_dY_dt(area_stem_dt_data)
dev.off()
pdf("output/SI/growth_light_mass.pdf", width = 7.5, height = 5L)
figure_dY_dt(mass_above_ground_dt_data)
dev.off()
pdf("output/main/lcp_trait.pdf", width = 7.5, height = 2.5)
figure_lcp_trait(lcp_trait_data)
dev.off()
pdf("output/main/mass_fraction.pdf", width = 10L, height = 2.5)
figure_mass_fraction(rate_vs_size_data)
dev.off()
figure_rate_vs_size_panels(rate_vs_size_data, "net_mass_production_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "mass_total_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "darea_leaf_dmass_live", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "height_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "area_leaf_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "area_stem_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "diameter_stem_dt", "output/conn")
latex_build("ms/figure_conceptual.tex", output = "output/main/figure_conceptual.pdf", engine = "xelatex")
tree <- get.pic("data/tree.eps")
pdf("output/talk/growth_lma_1.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 1, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_2.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 2, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_3.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 3, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_4.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 4, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_5.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 5, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_6.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 6, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_7.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 7, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_lma_8.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("lma", 8, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_1.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 1, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_2.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 2, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_3.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 3, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_4.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 4, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_5.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 5, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_6.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 6, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_7.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 7, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_rho_8.pdf", width = 8L, height = 4L)
figure_dY_dt_talk("rho", 8, height_dt_data_talk, tree)
dev.off()
pdf("output/talk/growth_light_height.pdf", width = 8L, height = 3L)
figure_dY_dt_talk2(height_dt_data)
dev.off()
