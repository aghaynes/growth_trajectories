library("baad.data")
library("rmarkdown")
library("plant")
library("xtable")
library("RColorBrewer")
library("dplyr")
library("knitr")
library("parallel")
library("rstan")
source("R/axis.R")
source("R/build.R")
source("R/figures_data.R")
source("R/figures.R")
source("R/stan.R")
source("R/tables.R")
source("R/talk.R")
source("R/utils-plot.R")
source("R/utils.R")
source("R/wright_2004.R")
dir.create("downloads", FALSE, TRUE)
dir.create("output/main", FALSE, TRUE)
dir.create("output/SI", FALSE, TRUE)
dir.create("output/conn", FALSE, TRUE)
dir.create("output/talk", FALSE, TRUE)
download.file("http://www.nature.com/nature/journal/v428/n6985/extref/nature02403-s2.xls", "downloads/wright_2004.xls")
fit_a.lf_h.t <- fit_SMA_baad("a.lf", "h.t")
fit_a.lf_m.rf <- fit_SMA_baad("a.lf", "m.rf")
fit_a.lf_sap <- fit_SMA_baad("a.lf", "sap")
fit_h.t_msal <- fit_SMA_baad("h.t", "msal")
library("remake")
make_script(file = "build.R")
height_dt_data <- figure_height_dt_data()
diameter_stem_dt_data <- figure_diameter_stem_dt_data()
area_stem_dt_data <- figure_area_stem_dt_data()
mass_above_ground_dt_data <- figure_mass_above_ground_dt_data()
pdf("output/main/lcp_schematic.pdf", width = 6L, height = 4L)
figure_lcp_schematic()
dev.off()
lcp_trait_data <- figure_lcp_trait_data()
rate_vs_size_data <- figure_rate_vs_size_data()
knitr::knit("ms/ms-supp.Rnw", "ms/ms-supp.tex")
library("readxl")
glopnet <- process_wright_2004("downloads/wright_2004.xls")
pdf("output/main/assumptions.pdf", width = 9L, height = 9L)
figure_assumptions(fit_a.lf_h.t, fit_a.lf_sap, fit_a.lf_m.rf, fit_h.t_msal)
dev.off()
fit_lma_tradeoff <- fit_SMA_lma(glopnet)
pdf("output/SI/lma_tradeoff.pdf", width = 6L, height = 6L)
figure_lma_tradeoff(glopnet, fit_lma_tradeoff)
dev.off()
pdf("output/main/growth_light_height.pdf", width = 9L, height = 6L)
figure_dY_dt(height_dt_data)
dev.off()
pdf("output/SI/growth_light_dia.pdf", width = 9L, height = 6L)
figure_dY_dt(diameter_stem_dt_data)
dev.off()
pdf("output/SI/growth_light_area.pdf", width = 9L, height = 6L)
figure_dY_dt(area_stem_dt_data)
dev.off()
pdf("output/SI/growth_light_mass.pdf", width = 9L, height = 6L)
figure_dY_dt(mass_above_ground_dt_data)
dev.off()
latex_build("ms/ms-supp.tex", bibliography = "ms/references.bib", clean = FALSE)
pdf("output/main/lcp_trait.pdf", width = 9L, height = 3L)
figure_lcp_trait(lcp_trait_data)
dev.off()
pdf("output/main/mass_fraction.pdf", width = 10L, height = 2.5)
figure_mass_fraction(rate_vs_size_data)
dev.off()
figure_rate_vs_size_panels(rate_vs_size_data, "net_mass_production_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "mass_total_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "darea_leaf_dmass_live", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "height_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "area_leaf_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "area_stem_dt", "output/conn")
figure_rate_vs_size_panels(rate_vs_size_data, "diameter_stem_dt", "output/conn")
latex_build("ms/figure_conceptual.tex", output = "output/main/figure_conceptual.pdf", engine = "xelatex")
latex_build("ms/ms.tex", bibliography = "ms/references.bib")
